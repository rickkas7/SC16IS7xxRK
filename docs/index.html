<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SC16IS7xxRK: SC16IS7xxRK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SC16IS7xxRK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">SC16IS7xxRK </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <em>I2C and SPI UART driver for Particle devices</em></p>
<p>From the NXP datasheet:</p>
<blockquote class="doxtable">
<p>&zwj;The SC16IS740/750/760 is a follower I²C-bus/SPI interface to a single-channel high performance UART. It offers data rates up to 5 Mbit/s and guarantees low operating and sleeping current. The SC16IS750 and SC16IS760 also provide the application with 8 additional programmable I/O pins. The device comes in very small HVQFN24, TSSOP24 (SC16IS750/760) and TSSOP16 (SC16IS740) packages, which makes it ideally suitable for handheld, battery operated applications. This family of products enables seamless protocol conversion from I²C-bus or SPI to and RS-232/RS-485 and are fully bidirectional. </p>
</blockquote>
<p>This library also supports the SC16IS752 and SC16IS762 dual UART.</p>
<h3>Chip features</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">SC16IS7xx   </th><th class="markdownTableHeadCenter">Ports   </th><th class="markdownTableHeadCenter">IrDA   </th><th class="markdownTableHeadCenter">GPIO   </th><th class="markdownTableHeadLeft">SPI Max    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SC16IS740   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyLeft">4 Mbps    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SC16IS750   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">115.2 Kbps   </td><td class="markdownTableBodyCenter">8   </td><td class="markdownTableBodyLeft">4 Mbps    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SC16IS760   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">1.152 Mbps   </td><td class="markdownTableBodyCenter">8   </td><td class="markdownTableBodyLeft">15 Mbps    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SC16IS752   </td><td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyCenter">115.2 Kbps   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyLeft">4 Mbps    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SC16IS762   </td><td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyCenter">1.152 Mbps   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyLeft">15 Mbps   </td></tr>
</table>
<ul>
<li>IrDA and GPIO not currently supported by this library.</li>
</ul>
<h3>Chip packages</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">SC16IS7xx   </th><th class="markdownTableHeadCenter">TSSOP16   </th><th class="markdownTableHeadCenter">HVQFN24   </th><th class="markdownTableHeadCenter">TSSOP24   </th><th class="markdownTableHeadCenter">TSSOP28   </th><th class="markdownTableHeadCenter">HVQFN32    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SC16IS740IPW   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SC16IS750IBS   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SC16IS760IBS   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SC16IS750IPW   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SC16IS760IPW   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SC16IS752IPW   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SC16IS762IPW   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SC16IS752IBS   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SC16IS762IBS   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">x   </td></tr>
</table>
<h1>Serial connections and flow control</h1>
<p>The SC16IS7xx supports both hardware and software flow control, though this library only supports optional hardware flow control.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">SC16IS7xx   </th><th class="markdownTableHeadCenter">Direction   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">TX   </td><td class="markdownTableBodyCenter">Output   </td><td class="markdownTableBodyLeft">UART transmitter output. Connect to other side's RX.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">RX   </td><td class="markdownTableBodyCenter">Input   </td><td class="markdownTableBodyLeft">UART receiver input. Connecvt to other sides' TX.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">/CTS   </td><td class="markdownTableBodyCenter">Input   </td><td class="markdownTableBodyLeft">UART clear to send (active LOW). Other side is ready to receive data when LOW.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">/RTS   </td><td class="markdownTableBodyCenter">Output   </td><td class="markdownTableBodyLeft">UART request to send (active LOW). The SC16IS7xx can receive data when LOW.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">/DSR   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyLeft">Data set ready. Optional flow control pin manually controlled as GPIO.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">/DTR   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyLeft">Data terminal ready. Optional flow control pin manually controlled as GPIO.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">/CD   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyLeft">Carrier detect. Optional flow control pin manually controlled as GPIO.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">/RI   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyLeft">Ring indictor. Optional flow control pin manually controlled as GPIO.   </td></tr>
</table>
<p>Both the RX/TX pair and CTS/RTS pair are typically crossed between the two sides of the UART serial link. In other words, RX on one side connects to TX on the other and vice-versa.</p>
<p>The last four flow control signals are rarely used. The library does not currently support setting and reading these pins.</p>
<p>Note that the serial outputs are 3.3V and the inputs must be 3.3V or 5V. If you are connecting to RS-232 or RS-485 you need the appropriate driver chip to shift the levels.</p>
<p>Automatic hardware flow control (CTS/RTS) is optional and can be enabled on a per-port basis.</p>
<h1>Serial settings</h1>
<h2>Baud rates</h2>
<p>The chip requires an external crystal, which is typically either 1.8432 MHz or 3.072 MHz. Both are supported by the library:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Baud Rate   </th><th class="markdownTableHeadCenter">1.8432 MHz   </th><th class="markdownTableHeadCenter">3.072 MHz    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">50   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">75   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">110   </td><td class="markdownTableBodyCenter">0.026   </td><td class="markdownTableBodyCenter">0.026    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">134.5   </td><td class="markdownTableBodyCenter">0.058   </td><td class="markdownTableBodyCenter">0.034    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">150   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">300   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">600   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">1200   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">1800   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">0.312    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">2000   </td><td class="markdownTableBodyCenter">0.069   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">2400   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">3600   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">0.628    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">4800   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">7200   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">1.23    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">9600   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">19200   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">38400   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">56000   </td><td class="markdownTableBodyCenter">2.86   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">115200   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter"></td></tr>
</table>
<ul>
<li>A number in the table above indicates the percentage deviation from the baud rate. Because of the large deviation, 56000 baud is not recommended for use with a 1.8432 MHz crystal.</li>
<li>An empty space in the table above indicates that there is no divisor that can produce this baud rate with that crystal.</li>
</ul>
<p>When using higher baud rates, using buffered read mode is recommended. At 115200 baud approximately 11,520 bytes per second can be transmitted. Since the FIFO can be serviced 1000 times per second, with a read of up to 64 bytes, this is still within the capability of both SPI and I2C. SPI at 4 Mbit/sec. is recommended, however I2C will work. Using I2C in 400 Kbit/sec mode is recommended over the default of 100 Kbit/sec., however all I2C devices must be able to support 400 Kbit/sec. mode in order to use it.</p>
<h2>Word lengths</h2>
<p>The chip and library support 5, 6, 7, and 8 bit word lengths.</p>
<h2>Stop bits</h2>
<p>The chip and library support 1 or 2 stop bits at 6, 7, or 8 bit word lengths. At 5 bit word length, 1 or 1 1/2 stop bits are supported.</p>
<h2>Parity</h2>
<p>The chip and library support no parity, even, odd, forced 0, and forced 1 parity.</p>
<h1>Buffered read mode</h1>
<p>The chip has a 64-byte FIFO. In some situations, you may not be able to read the data out of the FIFO fast enough from the main application loop thread if you have other blocking operations. To solve this problem, buffered read mode can be enabled.</p>
<p>When using buffered read, a worker thread is used to read the chip FIFO. Since the worker thread gets CPU time 1000 times per second, it can easily read data up to the maximum baud rate</p>
<h1>Interrupts</h1>
<p>This library optionally can use the hardware interrupt (IRQ) feature of the SC16IS7xx. Use is optional but not as useful as you'd think. In particular, it will not make data transfer faster or have lower latency!</p>
<ul>
<li>It is not possible to start an I2C or SPI transaction from an ISR. However the chip must be queried to to determine which interrupt triggered.</li>
<li>Since you can only start transactions from a thread, interrupts don't reduce the latency any more than polling.</li>
<li>Interrupts do have a small benefit in that the thread would not have to query the chip on every loop, 1000 times per second. This is especially true when using I2C and you are infrequently transferring data.</li>
<li>Received data interrupts are only used in buffered read mode. In normal mode, the chip is queried on every read anyway, and interrupts would have no benefit.</li>
</ul>
<h1>Usage overview</h1>
<p>The examples show how to use most of the library features, however a detailed description is provided below.</p>
<h2>Declare an object</h2>
<p>For the SC16IS740, SC16IS750, or SC16IS760, instantiate an object for the chip. This is typically done as a global object, but can be allocated on the heap using <code>new</code>. The constructor does very little and is safe as a global object.</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_s_c16_i_s7x0.html">SC16IS7x0</a> extSerial;</div>
<div class="ttc" id="aclass_s_c16_i_s7x0_html"><div class="ttname"><a href="class_s_c16_i_s7x0.html">SC16IS7x0</a></div><div class="ttdoc">Class for SC16IS740, SC16IS750, SC16IS760 single I2C or SPI UART.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.h:653</div></div>
</div><!-- fragment --><p>For the SC16IS752 and SC16IS762, declare:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_s_c16_i_s7x2.html">SC16IS7x2</a> extSerial;</div>
<div class="ttc" id="aclass_s_c16_i_s7x2_html"><div class="ttname"><a href="class_s_c16_i_s7x2.html">SC16IS7x2</a></div><div class="ttdoc">Class for SC16IS852 amd SC16IS862 dual SPI or I2C UART.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.h:766</div></div>
</div><!-- fragment --><p>The object is not a singleton because you can have multiple chips. Using the A0 and A1, up to 16 chips can be added to an I2C bus. The number of chips connected to a single GPIO is limited only by the number of available GPIO as each chip must have a unique CS line.</p>
<h2>Set SPI or I2C mode</h2>
<p>Typically from global <code>setup()</code> you set the options for the chip.</p>
<h3>SPI</h3>
<p>To use SPI, you specify which SPI port (typically <code>SPI</code>), the CS pin, and the speed in MHz. The speed is optional, and defaults to 4 MHz.</p>
<div class="fragment"><div class="line"><span class="comment">// SPI port, CS line</span></div>
<div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7x0.html#a227c960dbd1e72c4adc436fb6ef3d6c9">withSPI</a>(&amp;SPI, D4, 4);</div>
<div class="ttc" id="aclass_s_c16_i_s7x0_html_a227c960dbd1e72c4adc436fb6ef3d6c9"><div class="ttname"><a href="class_s_c16_i_s7x0.html#a227c960dbd1e72c4adc436fb6ef3d6c9">SC16IS7x0::withSPI</a></div><div class="ttdeci">SC16IS7x0 &amp; withSPI(SPIClass *spi, pin_t csPin, size_t speedMHz=4)</div><div class="ttdoc">Chip is connected by SPI.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.h:714</div></div>
</div><!-- fragment --><p>The SC16IS760 and SC16IS762 can run at SPI bus speeds up to 15 MHz but all other chips are limited to 4 MHz. Unlike SPI, each device on the SPI bus can run at a different speed and when an SPI transaction begins, the speed, bit order, and mode are set.</p>
<h3>I2C</h3>
<p>To use I2C mode, use <code>withI2C()</code> specifying which I2C interface (typically <code>Wire</code>) and the index or I2C address:</p>
<div class="fragment"><div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7x0.html#a3f6da109ad43a306ba8717dea4c52979">withI2C</a>(&amp;Wire, 0);</div>
<div class="ttc" id="aclass_s_c16_i_s7x0_html_a3f6da109ad43a306ba8717dea4c52979"><div class="ttname"><a href="class_s_c16_i_s7x0.html#a3f6da109ad43a306ba8717dea4c52979">SC16IS7x0::withI2C</a></div><div class="ttdeci">SC16IS7x0 &amp; withI2C(TwoWire *wire, uint8_t addr=0)</div><div class="ttdoc">Chip is connected by I2C.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.h:702</div></div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">A1   </th><th class="markdownTableHeadCenter">A0   </th><th class="markdownTableHeadCenter">Index   </th><th class="markdownTableHeadLeft">I2C Address    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">VDD   </td><td class="markdownTableBodyCenter">VDD   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyLeft">0x48    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">VDD   </td><td class="markdownTableBodyCenter">GND   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyLeft">0x49    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">VDD   </td><td class="markdownTableBodyCenter">SCL   </td><td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyLeft">0x4a    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">VDD   </td><td class="markdownTableBodyCenter">SDA   </td><td class="markdownTableBodyCenter">3   </td><td class="markdownTableBodyLeft">0x4b    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">GND   </td><td class="markdownTableBodyCenter">VDD   </td><td class="markdownTableBodyCenter">4   </td><td class="markdownTableBodyLeft">0x4c    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">GND   </td><td class="markdownTableBodyCenter">GND   </td><td class="markdownTableBodyCenter">5   </td><td class="markdownTableBodyLeft">0x4d    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">GND   </td><td class="markdownTableBodyCenter">SCL   </td><td class="markdownTableBodyCenter">6   </td><td class="markdownTableBodyLeft">0x4e    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">GND   </td><td class="markdownTableBodyCenter">SDA   </td><td class="markdownTableBodyCenter">7   </td><td class="markdownTableBodyLeft">0x4f    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">SCL   </td><td class="markdownTableBodyCenter">VDD   </td><td class="markdownTableBodyCenter">8   </td><td class="markdownTableBodyLeft">0x50    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">SCL   </td><td class="markdownTableBodyCenter">GND   </td><td class="markdownTableBodyCenter">9   </td><td class="markdownTableBodyLeft">0x51    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">SCL   </td><td class="markdownTableBodyCenter">SCL   </td><td class="markdownTableBodyCenter">10   </td><td class="markdownTableBodyLeft">0x52    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">SCL   </td><td class="markdownTableBodyCenter">SDA   </td><td class="markdownTableBodyCenter">11   </td><td class="markdownTableBodyLeft">0x53    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">SDA   </td><td class="markdownTableBodyCenter">VDD   </td><td class="markdownTableBodyCenter">12   </td><td class="markdownTableBodyLeft">0x54    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">SDA   </td><td class="markdownTableBodyCenter">GND   </td><td class="markdownTableBodyCenter">13   </td><td class="markdownTableBodyLeft">0x55    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">SDA   </td><td class="markdownTableBodyCenter">SCL   </td><td class="markdownTableBodyCenter">14   </td><td class="markdownTableBodyLeft">0x56    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">SDA   </td><td class="markdownTableBodyCenter">SDA   </td><td class="markdownTableBodyCenter">15   </td><td class="markdownTableBodyLeft">0x57   </td></tr>
</table>
<p>When using I2C, it's recommended that you use 400 KHz mode, with a caveat: With I2C, every device must be able to support 400 KHz mode in order to enable it. Unlike SPI, all chips must support the higher data rate and it is enabled globally for all devices.</p>
<div class="fragment"><div class="line">Wire.setSpeed(CLOCK_SPEED_400KHZ);</div>
</div><!-- fragment --><h2>Set other options</h2>
<h3>withOscillatorFrequency()</h3>
<p>The default is 1843200 (1.8432 MHz). If you are using a 3.072 MHz crystal, set the oscillator frequency to 3072000. This is necessary to the baud rate is correctly set.</p>
<div class="fragment"><div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7xx_interface.html#a12feb9381bf52541d2ed613d3ea91f44">withOscillatorFrequency</a>(3072000);</div>
<div class="ttc" id="aclass_s_c16_i_s7xx_interface_html_a12feb9381bf52541d2ed613d3ea91f44"><div class="ttname"><a href="class_s_c16_i_s7xx_interface.html#a12feb9381bf52541d2ed613d3ea91f44">SC16IS7xxInterface::withOscillatorFrequency</a></div><div class="ttdeci">SC16IS7xxInterface &amp; withOscillatorFrequency(int freqHz)</div><div class="ttdoc">Set the oscillator frequency for the chip.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.h:460</div></div>
</div><!-- fragment --><p>The setting made be set before calling <code>begin()</code>.</p>
<h3>withIRQ</h3>
<p>If you want to use hardware IRQ mode, use <code>withIRQ</code>.</p>
<div class="fragment"><div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7xx_interface.html#acc1d16a1d128fb558600b7bd0f63c859">withIRQ</a>(D3); </div>
<div class="ttc" id="aclass_s_c16_i_s7xx_interface_html_acc1d16a1d128fb558600b7bd0f63c859"><div class="ttname"><a href="class_s_c16_i_s7xx_interface.html#acc1d16a1d128fb558600b7bd0f63c859">SC16IS7xxInterface::withIRQ</a></div><div class="ttdeci">SC16IS7xxInterface &amp; withIRQ(pin_t irqPin, PinMode mode=INPUT_PULLUP)</div><div class="ttdoc">Sets the pin used for IRQ (hardware interrupts). This is optional.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.cpp:545</div></div>
</div><!-- fragment --><p>Using hardware IRQ is optional, and does <em>not</em> reduce latency or make the data transfer faster!</p>
<p>IRQ mode must be enabled before buffered read mode, and before calling <code>begin()</code>.</p>
<h3>softwareReset</h3>
<p>This does a software reset of the chip. Since hardware reset or <code>System.reset()</code> does not reset the chip, using <code>softwareReset()</code> during <code>setup()</code> is a good practice.</p>
<div class="fragment"><div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7xx_interface.html#a60d0ec757cb782d5592b366576e4be1b">softwareReset</a>();</div>
<div class="ttc" id="aclass_s_c16_i_s7xx_interface_html_a60d0ec757cb782d5592b366576e4be1b"><div class="ttname"><a href="class_s_c16_i_s7xx_interface.html#a60d0ec757cb782d5592b366576e4be1b">SC16IS7xxInterface::softwareReset</a></div><div class="ttdeci">SC16IS7xxInterface &amp; softwareReset()</div><div class="ttdoc">Do a software reset of the device.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.cpp:570</div></div>
</div><!-- fragment --><p>This is typically called at startup before calling <code>begin()</code>.</p>
<h3>powerOnCheck</h3>
<p>This call is optional but you may want to call it after calling <code>softwareReset()</code>, especially during development.</p>
<p>It examines several registers to make sure they're in the expected state. If you do not use <code>softwareReset</code> the chip may be incorrectly flagged as failing powerOnCheck because the registers have already been programmed to a non-default state.</p>
<div class="fragment"><div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7xx_interface.html#a6d186d2670e364ce5763ee86f6c87194">powerOnCheck</a>();</div>
<div class="ttc" id="aclass_s_c16_i_s7xx_interface_html_a6d186d2670e364ce5763ee86f6c87194"><div class="ttname"><a href="class_s_c16_i_s7xx_interface.html#a6d186d2670e364ce5763ee86f6c87194">SC16IS7xxInterface::powerOnCheck</a></div><div class="ttdeci">bool powerOnCheck()</div><div class="ttdoc">Do a check to see if the device is set to the expected power-on values.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.cpp:590</div></div>
</div><!-- fragment --><h2>Per-port settings</h2>
<p>The SC16IS740, SC16IS750, and SC16IS760 are single-port devices and the <code><a class="el" href="class_s_c16_i_s7x0.html" title="Class for SC16IS740, SC16IS750, SC16IS760 single I2C or SPI UART.">SC16IS7x0</a></code> object is derived from <code><a class="el" href="class_s_c16_i_s7xx_port.html" title="Class for an instance of a UART.">SC16IS7xxPort</a></code> so all per-port options can be used with your <code>extSerial</code> object directly.</p>
<div class="fragment"><div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600);</div>
<div class="ttc" id="aclass_s_c16_i_s7xx_port_html_a3b4b54cef48348d1683ce7535b77cb80"><div class="ttname"><a href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">SC16IS7xxPort::begin</a></div><div class="ttdeci">bool begin(int baudRate, uint32_t options=OPTIONS_8N1)</div><div class="ttdoc">Set up the chip. You must do this before reading or writing.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.cpp:161</div></div>
</div><!-- fragment --><p>Since the SC16IS752 and SC16IS762 have two ports, you need to specify which port. You can use <code>a()</code> and <code>b()</code> to access port A or port B:</p>
<div class="fragment"><div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7x0.html#a7179f43335ff24ade64f8467da61ef7b">a</a>().<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600);</div>
<div class="line">extSerial.b().<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600);</div>
<div class="ttc" id="aclass_s_c16_i_s7x0_html_a7179f43335ff24ade64f8467da61ef7b"><div class="ttname"><a href="class_s_c16_i_s7x0.html#a7179f43335ff24ade64f8467da61ef7b">SC16IS7x0::a</a></div><div class="ttdeci">SC16IS7xxPort &amp; a()</div><div class="ttdoc">Convenience accessor for the port object.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.h:726</div></div>
</div><!-- fragment --><p>Alternatively, you can use the <code>[]</code> operator. This is useful if you want to specify which port from a variable.</p>
<div class="fragment"><div class="line">extSerial[0].<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600);</div>
<div class="line">extSerial[1].<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600);</div>
</div><!-- fragment --><p>Additionally, even though it's not required, on the single-port chips you can use <code>a()</code> or <code>[0]</code> to access the single port so your code can be the same for the <a class="el" href="class_s_c16_i_s7x0.html" title="Class for SC16IS740, SC16IS750, SC16IS760 single I2C or SPI UART.">SC16IS7x0</a> and <a class="el" href="class_s_c16_i_s7x2.html" title="Class for SC16IS852 amd SC16IS862 dual SPI or I2C UART.">SC16IS7x2</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// Optional, but works on the SC16IS7x0 for consistency with the SC16IS7x2.</span></div>
<div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7x0.html#a7179f43335ff24ade64f8467da61ef7b">a</a>().<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600);</div>
<div class="line">extSerial[0].<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600);</div>
</div><!-- fragment --><h3>withBufferedRead</h3>
<p>Buffered read mode uses a thread to read the chip, reducing the likelihood of FIFO overrun. The parameter is the size of the buffer to allocate on the heap.</p>
<div class="fragment"><div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a0da41548b94e0dd46e6a195a5882d631">withBufferedRead</a>(1024);     <span class="comment">// SC16IS7x0 only</span></div>
<div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7x0.html#a7179f43335ff24ade64f8467da61ef7b">a</a>().<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a0da41548b94e0dd46e6a195a5882d631">withBufferedRead</a>(1024); <span class="comment">// SC16IS7x0 or SC16IS7x2</span></div>
<div class="line">extSerial.b().<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a0da41548b94e0dd46e6a195a5882d631">withBufferedRead</a>(1024); <span class="comment">// SC16IS7x2 only</span></div>
<div class="ttc" id="aclass_s_c16_i_s7xx_port_html_a0da41548b94e0dd46e6a195a5882d631"><div class="ttname"><a href="class_s_c16_i_s7xx_port.html#a0da41548b94e0dd46e6a195a5882d631">SC16IS7xxPort::withBufferedRead</a></div><div class="ttdeci">SC16IS7xxPort &amp; withBufferedRead(size_t bufferSize)</div><div class="ttdoc">Enable buffered read mode.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.h:179</div></div>
</div><!-- fragment --><p>The setting made be set before calling <code>begin()</code>. This setting is per-port</p>
<h3>begin</h3>
<p>Finally you must call <code>begin()</code>. This sets the baud rate, stop bits, parity, and optionally enables hardware flow control. The default is 8N1 (8 bits, no parity, one stop bit), and flow control disabled.</p>
<div class="fragment"><div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600);     <span class="comment">// SC16IS7x0 only</span></div>
<div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7x0.html#a7179f43335ff24ade64f8467da61ef7b">a</a>().<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600); <span class="comment">// SC16IS7x0 or SC16IS7x2</span></div>
<div class="line">extSerial.b().<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600); <span class="comment">// SC16IS7x2 only</span></div>
</div><!-- fragment --><p>You can call begin more than once if you want to change the baud rate. The FIFOs are cleared when you call begin.</p>
<p>Available baud rates depend on your oscillator, but with a 1.8432 MHz oscillator, the following are supported: 50, 75, 110, 134.5, 150, 300, 600, 1200, 1800, 2000, 2400, 3600, 4800, 7200, 9600, 19200, 38400, 57600, 115200</p>
<p>The valid options in standard number of bits; none=N, even=E, odd=O; number of stop bits format: OPTIONS_8N1, OPTIONS_8E1, OPTIONS_8O1, OPTIONS_8N2, OPTIONS_8E2, OPTIONS_8O2, OPTIONS_7N1, OPTIONS_7E1, OPTIONS_7O1, OPTIONS_7N2, OPTIONS_7E2, OPTIONS_7O2</p>
<div class="fragment"><div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600, <a class="code hl_variable" href="class_s_c16_i_s7xx_port.html#a84e4efa0de63a7eebd95db0589f6941e">SC16IS7xxPort::OPTIONS_7E1</a>);</div>
<div class="ttc" id="aclass_s_c16_i_s7xx_port_html_a84e4efa0de63a7eebd95db0589f6941e"><div class="ttname"><a href="class_s_c16_i_s7xx_port.html#a84e4efa0de63a7eebd95db0589f6941e">SC16IS7xxPort::OPTIONS_7E1</a></div><div class="ttdeci">static const uint32_t OPTIONS_7E1</div><div class="ttdoc">7 data bits, even parity, 1 stop bit</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.h:320</div></div>
</div><!-- fragment --><p>Unlike the Device OS options, the SC16IS7xx OPTIONS_8N1 value is not 0! If you omit are enabling hardware flow control be sure to set it like:</p>
<div class="fragment"><div class="line">extSerial.<a class="code hl_function" href="class_s_c16_i_s7xx_port.html#a3b4b54cef48348d1683ce7535b77cb80">begin</a>(9600, <a class="code hl_variable" href="class_s_c16_i_s7xx_port.html#a03404012026681a9f767bdebdcb96f2d">SC16IS7xxPort::OPTIONS_8N1</a> | <a class="code hl_variable" href="class_s_c16_i_s7xx_port.html#a0594df25f3509aa6f0788651fb247ab7">SC16IS7xxPort::OPTIONS_FLOW_CONTROL_RTS_CTS</a>);</div>
<div class="ttc" id="aclass_s_c16_i_s7xx_port_html_a03404012026681a9f767bdebdcb96f2d"><div class="ttname"><a href="class_s_c16_i_s7xx_port.html#a03404012026681a9f767bdebdcb96f2d">SC16IS7xxPort::OPTIONS_8N1</a></div><div class="ttdeci">static const uint32_t OPTIONS_8N1</div><div class="ttdoc">8 data bits, no parity, 1 stop bit</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.h:311</div></div>
<div class="ttc" id="aclass_s_c16_i_s7xx_port_html_a0594df25f3509aa6f0788651fb247ab7"><div class="ttname"><a href="class_s_c16_i_s7xx_port.html#a0594df25f3509aa6f0788651fb247ab7">SC16IS7xxPort::OPTIONS_FLOW_CONTROL_RTS_CTS</a></div><div class="ttdeci">static const uint32_t OPTIONS_FLOW_CONTROL_RTS_CTS</div><div class="ttdoc">Hardware flow control in both directions.</div><div class="ttdef"><b>Definition:</b> SC16IS7xxRK.h:330</div></div>
</div><!-- fragment --><p>If you leave off the <code>OPTIONS_8N1</code> the output will be 5N1, not 8N1! </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
